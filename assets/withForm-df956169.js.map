{"version":3,"file":"withForm-df956169.js","sources":["../../../../packages/ds/dist/components/Form/Form.js","../../stories/utils/withForm.ts"],"sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { css } from '@committed/ds-ss';\nimport { forwardRef } from 'react';\nimport { component } from '../../utils';\nimport { Button } from '../Button';\nconst DEFAULT_TAG = 'form';\n/**\n * Form component\n *\n * Is a styled version of the `form` html tag for use with `FormControl`s.\n */\nexport const Form = component(DEFAULT_TAG, 'c-form', css({\n    boxSizing: 'border-box',\n    outline: 'none',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '$5',\n}));\nForm.displayName = 'Form';\nexport const FormButton = forwardRef((_a, forwardedRef) => {\n    var { errors, children = 'Submit' } = _a, props = __rest(_a, [\"errors\", \"children\"]);\n    const disabled = Object.values(errors !== null && errors !== void 0 ? errors : {}).filter((t) => typeof t === 'string').length > 0;\n    return (_jsx(Button, Object.assign({ type: \"submit\", variant: \"solid\", disabled: disabled }, props, { ref: forwardedRef, children: children })));\n});\nFormButton.displayName = 'FormButton';\n","import { CheckedState } from '@committed/ds'\nimport { Dispatch, FormEvent, SetStateAction } from 'react'\n\nexport function toJson(callback: (...args: any[]) => void) {\n  return (object: any): void => {\n    callback(JSON.stringify(object, null, 2))\n  }\n}\n\nexport function withFormObject(callback: (...args: any[]) => void) {\n  return (e: FormEvent): void => {\n    e.preventDefault()\n    const formData = new FormData(e.target as HTMLFormElement)\n    let object: any = {}\n    formData.forEach((value, key) => {\n      // Reflect.has in favor of: object.hasOwnProperty(key)\n      if (!Reflect.has(object, key)) {\n        object[key] = value\n        return\n      }\n      if (!Array.isArray(object[key])) {\n        object[key] = [object[key]]\n      }\n      object[key].push(value)\n    })\n    callback(object)\n  }\n}\n\nexport function withFormData(callback: (...args: any[]) => void) {\n  return withFormObject(toJson(callback))\n}\n\nexport const rotateCheckedState =\n  (setChecked: Dispatch<SetStateAction<CheckedState>>) => () => {\n    setChecked((checked) => {\n      if (checked === 'indeterminate') {\n        return true\n      } else if (checked) {\n        return false\n      } else {\n        return 'indeterminate'\n      }\n    })\n  }\n"],"names":["__rest","this","s","t","p","i","DEFAULT_TAG","Form","component","css","FormButton","forwardRef","_a","forwardedRef","errors","children","props","disabled","_jsx","Button","toJson","callback","object","withFormObject","formData","value","key","withFormData","rotateCheckedState","setChecked","checked"],"mappings":"6KAAA,IAAAA,EAAAC,YAAAA,WAAA,QAAA,SAAAC,EAAA,EAAA,CACA,IAAAC,EAAA,CAAA,EACA,QAAAC,KAAAF,EAAA,OAAA,UAAA,eAAA,KAAAA,EAAAE,CAAA,GAAA,EAAA,QAAAA,CAAA,EAAA,IACAD,EAAAC,CAAA,EAAAF,EAAAE,CAAA,GACA,GAAAF,GAAA,MAAA,OAAA,OAAA,uBAAA,WACA,QAAAG,EAAA,EAAAD,EAAA,OAAA,sBAAAF,CAAA,EAAAG,EAAAD,EAAA,OAAAC,IACA,EAAA,QAAAD,EAAAC,CAAA,CAAA,EAAA,GAAA,OAAA,UAAA,qBAAA,KAAAH,EAAAE,EAAAC,CAAA,CAAA,IACAF,EAAAC,EAAAC,CAAA,CAAA,EAAAH,EAAAE,EAAAC,CAAA,CAAA,GAEA,OAAAF,CACA,EAMA,MAAAG,EAAA,OAMAC,EAAAC,EAAAF,EAAA,SAAAG,EAAA,CACA,UAAA,aACA,QAAA,OACA,QAAA,OACA,cAAA,SACA,IAAA,IACA,CAAA,CAAA,EACAF,EAAA,YAAA,OACA,MAAAG,EAAAC,EAAA,WAAA,CAAAC,EAAAC,IAAA,CACA,GAAA,CAAA,OAAAC,EAAA,SAAAC,EAAA,QAAA,EAAAH,EAAAI,EAAAhB,EAAAY,EAAA,CAAA,SAAA,UAAA,CAAA,EACA,MAAAK,EAAA,OAAA,OAAAH,GAAA,CAAA,CAAA,EAAA,OAAAX,GAAA,OAAAA,GAAA,QAAA,EAAA,OAAA,EACA,OAAAe,EAAAC,EAAA,OAAA,OAAA,CAAA,KAAA,SAAA,QAAA,QAAA,SAAAF,CAAA,EAAAD,EAAA,CAAA,IAAAH,EAAA,SAAAE,CAAA,CAAA,CAAA,CACA,CAAA,EACAL,EAAA,YAAA,iFChCO,SAASU,EAAOC,EAAoC,CACzD,OAAQC,GAAsB,CAC5BD,EAAS,KAAK,UAAUC,EAAQ,KAAM,CAAC,CAAC,CAAA,CAE5C,CAEO,SAASC,EAAeF,EAAoC,CACjE,OAAQ,GAAuB,CAC7B,EAAE,eAAe,EACjB,MAAMG,EAAW,IAAI,SAAS,EAAE,MAAyB,EACzD,IAAIF,EAAc,CAAA,EACTE,EAAA,QAAQ,CAACC,EAAOC,IAAQ,CAE/B,GAAI,CAAC,QAAQ,IAAIJ,EAAQI,CAAG,EAAG,CAC7BJ,EAAOI,CAAG,EAAID,EACd,MACF,CACK,MAAM,QAAQH,EAAOI,CAAG,CAAC,IAC5BJ,EAAOI,CAAG,EAAI,CAACJ,EAAOI,CAAG,CAAC,GAErBJ,EAAAI,CAAG,EAAE,KAAKD,CAAK,CAAA,CACvB,EACDJ,EAASC,CAAM,CAAA,CAEnB,CAEO,SAASK,EAAaN,EAAoC,CACxD,OAAAE,EAAeH,EAAOC,CAAQ,CAAC,CACxC,CAEa,MAAAO,EACVC,GAAuD,IAAM,CAC5DA,EAAYC,GACNA,IAAY,gBACP,GACEA,EACF,GAEA,eAEV,CACH"}