import{a,F as p}from"./jsx-runtime-03b4ddbf.js";import{d as b}from"./component-92c13614.js";import{r as d}from"./index-76fb7be0.js";const m=d.createContext({choice:"light",theme:void 0,toggle:()=>{}}),w=()=>typeof window<"u",T=({light:t="light",dark:r="dark",choice:n=null,children:e})=>{var o,c;const[h,f]=d.useState("light"),[u,v]=d.useState(),s=d.useCallback(i=>{f(i);let l=!1;switch(n){case"light":l=!1;break;case"dark":l=!0;break;default:l=i==="dark";break}v(l?r:t||void 0)},[n,r,t]);w()&&((o=window==null?void 0:window.matchMedia)===null||o===void 0||o.call(window,"(prefers-color-scheme: dark)").addEventListener("change",i=>{s(i.matches?"dark":"light")}),(c=window==null?void 0:window.matchMedia)===null||c===void 0||c.call(window,"(prefers-color-scheme: light)").addEventListener("change",i=>{s(i.matches?"light":"dark")})),d.useLayoutEffect(()=>{const i=window==null?void 0:window.localStorage.getItem("themeChoice");i?s(i):window!=null&&window.matchMedia&&(window!=null&&window.matchMedia("(prefers-color-scheme: dark)").matches)?s("dark"):s("light")},[s]);const g=d.useMemo(()=>{const i=l=>{w()&&(window==null||window.localStorage.setItem("themeChoice",l)),s(l)};return{choice:h,theme:u,toggle:()=>{i(h==="light"?"dark":"light")}}},[h,u,s]);return a(m.Provider,{value:g,children:e})};var k=globalThis&&globalThis.__rest||function(t,r){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(n[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(t);o<e.length;o++)r.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(n[e[o]]=t[e[o]]);return n};const P=()=>{const{choice:t,toggle:r}=d.useContext(m);if(!r)throw new Error("useThemeController must be used within a ThemeProvider");return[t,r]},y=()=>{const t=d.useContext(m);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return[t.theme]},C=({local:t=!1,children:r})=>{const n=d.useRef(),[e]=y();if(d.useEffect(()=>(n.current=e,()=>{e&&document.body.classList.remove(e)})),t)return a("div",{className:b("c-theme-provider",e),"data-testid":"theme-provider",children:r});{const o=n.current;return o!==e&&(o&&document.body.classList.remove(o),e&&document.body.classList.add(e)),a(p,{children:r})}},M=t=>{var{light:r,dark:n,choice:e}=t,o=k(t,["light","dark","choice"]);return a(T,{light:r,dark:n,choice:e,children:a(C,Object.assign({},o))})};export{M as T,P as a,y as u};
//# sourceMappingURL=ThemeProvider-eacd95b7.js.map
